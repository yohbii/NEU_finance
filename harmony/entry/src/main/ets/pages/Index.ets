// æ•°æ®æ¨¡åž‹å®šä¹‰
interface NavItemData {
  icon: string;
  text: string;
}
interface StatCardData {
  title: string;
  value: string;
  change: string;
  isPositive: boolean;
}
interface StrategyData {
  title: string;
  type: string;
  performance: string;
  isPositive: boolean;
}
interface TaskData {
  title: string;
  time: string;
  priority: 'é«˜' | 'ä¸­' | 'ä½Ž';
}
interface QuickActionData {
  emoji: string;
  text: string;
  color: ResourceColor;
}

// ä¸»å…¥å£ç»„ä»¶
@Entry
@Component
struct Index {
  // æ­¤ State å˜é‡çŽ°åœ¨ä¸»è¦ç”¨äºŽé€šçŸ¥æ¡†æž¶æ•°æ®å˜åŒ–ï¼ŒTabsçš„åˆ‡æ¢ç”±å…¶è‡ªèº«ç®¡ç†
  @State selectedIndex: number = 0;
  private controller: TabsController = new TabsController();

  private navItems: NavItemData[] = [
    { icon: 'ðŸ’¼', text: 'å·¥ä½œå°' },
    { icon: 'ðŸ”¬', text: 'åŸºé‡‘ç ”ç©¶' },
    { icon: 'âš™ï¸', text: 'å› å­ç®¡ç†' },
    { icon: 'ðŸ“ˆ', text: 'ç­–ç•¥ç®¡ç†' },
    { icon: 'ðŸ“¦', text: 'ç»„åˆäº§å“' },
    { icon: 'ðŸ”„', text: 'äº¤æ˜“ç®¡ç†' },
  ];

  build() {
    // æ ¹ç»„ä»¶ç›´æŽ¥ä½¿ç”¨ Tabsï¼Œè¿™æ˜¯æœ€æ ‡å‡†çš„é¡¶éƒ¨å¯¼èˆªå¸ƒå±€
    Tabs({ barPosition: BarPosition.Start, controller: this.controller }) {
      ForEach(this.navItems, (item: NavItemData, index: number) => {
        // æ¯ä¸ª ForEach å¾ªçŽ¯é¡¹ç”Ÿæˆä¸€ä¸ª Tab

        // è®¾ç½®å•ä¸ª Tab æ ‡ç­¾çš„æ ·å¼
        .padding({ left: 15, right: 15, top: 12, bottom: 12 })
        .id(`tab${index}`)

      }, (item: NavItemData) => item.text) // ä½¿ç”¨ item.text ä½œä¸ºå”¯ä¸€çš„ key
    }
    .barMode(BarMode.Scrollable)
    .onChange((index: number) => {
      this.selectedIndex = index;
    })
    .width('100%')
    .height('100%')
    .shadow({ radius: 6, color: '#1F000000', offsetY: 2 })
  }
}

// MainContent ç»„ä»¶ï¼ŒçŽ°åœ¨åªè´Ÿè´£æ¸²æŸ“â€œå·¥ä½œå°â€çš„UIï¼Œä¸å…³å¿ƒå¸ƒå±€
@Component
struct MainContent {
  private statCards: StatCardData[] = [
    { title: 'åˆ›ä¸šæ¿æŒ‡', value: '2,789.34', change: '+1.24%', isPositive: true },
    { title: 'æ²ªæ·±300', value: '4,123.67', change: '+0.56%', isPositive: true },
  ];
  private strategies: StrategyData[] = [
    { title: 'ç¨³å¥æˆé•¿ç­–ç•¥', type: 'æ··åˆåž‹', performance: '+8.45%', isPositive: true },
    { title: 'ä»·å€¼æŠ•èµ„ç­–ç•¥', type: 'è‚¡ç¥¨åž‹', performance: '+12.78%', isPositive: true },
    { title: 'å¹³è¡¡é…ç½®ç­–ç•¥', type: 'FOF', performance: '+6.23%', isPositive: true },
    { title: 'é‡åŒ–é€‰è‚¡ç­–ç•¥', type: 'è‚¡ç¥¨åž‹', performance: '-2.15%', isPositive: false },
  ];
  private tasks: TaskData[] = [
    { title: 'å¤„ç†äº¤æ˜“å·®é”™å•', time: '4å°æ—¶å‰', priority: 'ä¸­' },
    { title: 'æ›´æ–°å› å­åº“æ•°æ®', time: '1å¤©å‰', priority: 'ä½Ž' },
    { title: 'ç­–ç•¥å›žæµ‹æŠ¥å‘Šå®¡æ ¸', time: '2å¤©å‰', priority: 'ä¸­' },
  ];
  private quickActions: QuickActionData[] = [
    { emoji: 'âž•', text: 'åˆ›å»ºåŸºé‡‘ç»„åˆ', color: '#3498db' },
    { emoji: 'ðŸ“Š', text: 'ç­–ç•¥å›žæµ‹', color: '#95a5a6' },
    { emoji: 'ðŸ”', text: 'å› å­åˆ†æž', color: '#2ecc71' },
    { emoji: 'â–¶ï¸', text: 'äº¤æ˜“æ‰§è¡Œ', color: '#f39c12' },
  ];
  build() {
    Column({ space: $r('app.float.page_padding') }) {
      this.Header()
      ForEach(this.statCards, (item: StatCardData) => {
        this.StatCard(item)
      }, item => item.title)
      this.StrategyCard(this.strategies)
      this.TaskCard(this.tasks)
      this.QuickActionCard(this.quickActions)
    }
    .padding($r('app.float.page_padding'))
  }

  @Builder Header() {
    Row() {
      Text('å·¥ä½œå°')
        .fontSize(28).fontWeight(FontWeight.Bold).fontColor($r('app.color.font_primary'))
      Row({ space: 8 }) {
        Text('ðŸ‘¨â€ðŸ’¼').fontSize(28)
        Text('æŠ•é¡¾ç»ç†').fontSize(16).fontColor($r('app.color.font_primary'))
      }
    }
    .width('100%').justifyContent(FlexAlign.SpaceBetween).alignItems(VerticalAlign.Center)
  }

  @Builder StatCard(item: StatCardData) {
    Column({ space: 8 }) {
      Text(item.title).fontSize(16).fontColor($r('app.color.font_secondary'))
      Text(item.value).fontSize(28).fontWeight(FontWeight.Bold).fontColor($r('app.color.font_primary'))
      Text(item.change).fontSize(14).fontColor(item.isPositive ? $r('app.color.positive_green') : $r('app.color.negative_red'))
    }
    .width('100%').alignItems(HorizontalAlign.Start).padding(20).backgroundColor($r('app.color.card_bg')).borderRadius($r('app.float.card_radius'))
  }

  @Builder StrategyCard(items: StrategyData[]) {
    Column({ space: 15 }) {
      Text('ç­–ç•¥è¡¨çŽ°').fontSize(18).fontWeight(FontWeight.Bold)
      ForEach(items, (item: StrategyData) => {
        Row() {
          Column({ space: 4 }) {
            Text(item.title).fontSize(16).fontWeight(FontWeight.Medium)
            Text(item.type).fontSize(12).fontColor($r('app.color.font_secondary'))
          }.alignItems(HorizontalAlign.Start)
          Text(item.performance).fontSize(16).fontWeight(FontWeight.Medium)
            .fontColor(item.isPositive ? $r('app.color.positive_green') : $r('app.color.negative_red'))
        }
        .justifyContent(FlexAlign.SpaceBetween).width('100%')
      }, item => item.title)
    }
    .width('100%').alignItems(HorizontalAlign.Start).padding(20).backgroundColor($r('app.color.card_bg')).borderRadius($r('app.float.card_radius'))
  }

  @Builder TaskCard(items: TaskData[]) {
    Column({ space: 15 }) {
      Text('å¾…åŠžäº‹é¡¹').fontSize(18).fontWeight(FontWeight.Bold)
      ForEach(items, (item: TaskData) => {
        Row() {
          Column({ space: 4 }) {
            Text(item.title).fontSize(16)
            Text(item.time).fontSize(12).fontColor($r('app.color.font_secondary'))
          }.alignItems(HorizontalAlign.Start)
          Text(item.priority).padding({ left: 8, right: 8, top: 2, bottom: 2 }).fontSize(12)
            .fontColor(item.priority === 'é«˜' ? '#e74c3c' : '#f39c12')
            .backgroundColor(item.priority === 'é«˜' ? '#fdeded' : '#fef5e7').borderRadius(4)
        }
        .justifyContent(FlexAlign.SpaceBetween).width('100%')
      }, item => item.title)
    }
    .width('100%').alignItems(HorizontalAlign.Start).padding(20).backgroundColor($r('app.color.card_bg')).borderRadius($r('app.float.card_radius'))
  }

  @Builder QuickActionCard(items: QuickActionData[]) {
    Column({ space: 12 }) {
      Text('å¿«æ·æ“ä½œ').fontSize(18).fontWeight(FontWeight.Bold)
      ForEach(items, (item: QuickActionData) => {
        Button() {
          Row({ space: 10 }) {
            Text(item.emoji).fontSize(20)
            Text(item.text).fontSize(16).fontColor(Color.White)
          }
        }
        .width('100%').height(48).backgroundColor(item.color).borderRadius(8)
      }, item => item.text)
    }
    .width('100%').alignItems(HorizontalAlign.Start).padding(20).backgroundColor($r('app.color.card_bg')).borderRadius($r('app.float.card_radius'))
  }
}