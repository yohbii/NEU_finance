@Entry
@Component
struct IndexPage {
  build() {
    Scroll() {
      Column() {
        // ç»Ÿè®¡å¡ç‰‡åŒºåŸŸ
        Flex({ direction: FlexDirection.Row, wrap: FlexWrap.Wrap }) {
          this.summaryCard('ğŸ’', '2,458', 'ç®¡ç†åŸºé‡‘')
          this.summaryCard('ğŸ“ˆ', '156', 'æ´»è·ƒç­–ç•¥')
          this.summaryCard('ğŸ“¦', '89', 'åœ¨ç®¡äº§å“')
          this.summaryCard('ğŸ’¹', '234', 'ä»Šæ—¥äº¤æ˜“')
        }
        .margin(12)

        // å¸‚åœºæ¦‚è§ˆåŒºåŸŸ
        Column() {
          Text('å¸‚åœºæ¦‚è§ˆ')
            .fontSize(20)
            .fontWeight(FontWeight.Medium)
            .margin({ bottom: 8 })
          Text('æœ¬éƒ¨åˆ†å±•ç¤ºäº†å…³é”®å¸‚åœºæŒ‡æ•°çš„æœ€æ–°åŠ¨æ€ï¼Œå¸®åŠ©æ‚¨å¿«é€ŸæŠŠæ¡å¸‚åœºæ•´ä½“èµ°åŠ¿ã€‚æ‰€æœ‰æ•°æ®å‡ä¸ºå®æ—¶æ›´æ–°ã€‚')
            .fontSize(14)
            .fontColor('#666')
            .margin({ bottom: 12 })
          Row({ space: 12 }) {
            this.marketCard('ä¸Šè¯æŒ‡æ•°', '3,247.52', '  +0.85%', '#E53935')
            this.marketCard('æ·±è¯æˆæŒ‡', '12,456.78', '  -0.32%', '#43A047')
          }
        }
        .backgroundColor(Color.White)
        .borderRadius(12)
        .padding(16)
        .margin({ left: 12, right: 12, bottom: 16 })

        // ç­–ç•¥è¡¨ç°åŒºåŸŸ
        Column() {
          Text('ç­–ç•¥è¡¨ç°')
            .fontSize(20)
            .fontWeight(FontWeight.Medium)
            .margin({ bottom: 8 })
          Text('é€šè¿‡ä¸‹æ–¹çš„æŠ˜çº¿å›¾ï¼Œæ‚¨å¯ä»¥ç›´è§‚åœ°è¿½è¸ªæ ¸å¿ƒæŠ•èµ„ç­–ç•¥ç»„åˆçš„è¿‘æœŸæ”¶ç›Šè¡¨ç°ï¼Œå¹¶ä¸åŸºå‡†æŒ‡æ•°è¿›è¡Œå¯¹æ¯”ã€‚')
            .fontSize(14)
            .fontColor('#666')
            .margin({ bottom: 12 })

          // è°ƒç”¨æ–°çš„ performanceChart æ„å»ºå™¨
          this.performanceChart()

          // å›¾ä¾‹
          Row({ space: 24 }) {
            this.chartLegend('#007DFF', 'æ ¸å¿ƒç­–ç•¥')
            this.chartLegend('#CCCCCC', 'åŸºå‡†æŒ‡æ•°')
          }
          .margin({ top: 16 })
          .justifyContent(FlexAlign.Center)

        }
        .backgroundColor(Color.White)
        .borderRadius(12)
        .padding(16)
        .margin({ left: 12, right: 12, bottom: 16 })

        // å¾…åŠäº‹é¡¹åŒºåŸŸ
        Column() {
          Text('å¾…åŠäº‹é¡¹')
            .fontSize(20)
            .fontWeight(FontWeight.Medium)
            .margin({ bottom: 8 })
          Text('è¿™é‡Œæ±‡æ€»äº†æ‚¨å½“å‰éœ€è¦å¤„ç†çš„ç´§æ€¥å’Œé‡è¦ä»»åŠ¡ï¼Œè¯·åŠæ—¶è·Ÿè¿›ã€‚')
            .fontSize(14)
            .fontColor('#666')
            .margin({ bottom: 12 })
          this.todoItem('å®¡æ ¸åŸºé‡‘äº§å“ä¸Šæ¶ç”³è¯·', '2å°æ—¶å‰', 'é«˜', '#E53935')
          this.todoItem('å¤„ç†äº¤æ˜“ç³»ç»Ÿå¼‚å¸¸å•', '4å°æ—¶å‰', 'ä¸­', '#FF9800')
        }
        .backgroundColor(Color.White)
        .borderRadius(12)
        .padding(16)
        .margin({ left: 12, right: 12, bottom: 32 })
      }
    }
    .backgroundColor('#F5F5F5')
  }

  /** ğŸ“¦ ç»Ÿè®¡å¡ç‰‡ */
  @Builder
  private summaryCard(icon: string, count: string, label: string) {
    Column() {
      Row({ space: 12 }) {
        Text(icon).fontSize(28)
        Column() {
          Text(count).fontSize(24).fontWeight(FontWeight.Bold)
          Text(label).fontSize(14).fontColor('#666')
        }
        .alignItems(HorizontalAlign.Start)
      }
    }
    .width('46%')
    .padding(16)
    .backgroundColor(Color.White)
    .borderRadius(12)
    .margin({ right: 8, bottom: 12 })
  }

  /** ğŸ“‰ å¸‚åœºæ¦‚è§ˆå¡ç‰‡ */
  @Builder
  private marketCard(name: string, value: string, change: string, color: string) {
    Column() {
      Text(name).fontSize(14).fontColor('#888').margin({bottom: 8})
      Text(value).fontSize(20).fontWeight(FontWeight.Bold)
      Text(change).fontSize(14).fontColor(color)
    }
    .alignItems(HorizontalAlign.Start)
    .width('46%')
    .padding(12)
    .backgroundColor('#FAFAFA')
    .border({ width: 1, color: '#E0E0E0' })
    .borderRadius(8)
    .margin({ bottom: 8 })
  }

  /** ğŸ“ˆ ç­–ç•¥è¡¨ç°å›¾è¡¨ (å·²ä¿®æ­£è¯­æ³•) */
  @Builder
  private performanceChart() {
    Stack() {
      // æ¨¡æ‹ŸåŸºå‡†æŒ‡æ•°æŠ˜çº¿ (ç°è‰²)
      Polyline()
        .points([
          [0, 180],
          [50, 160],
          [100, 170],
          [150, 140],
          [200, 130],
          [250, 110],
          [300, 100]
        ])
        .stroke(Color.Grey)
        .strokeWidth(2)
        .strokeOpacity(0.5)

      // æ¨¡æ‹Ÿæ ¸å¿ƒç­–ç•¥æŠ˜çº¿ (è“è‰²)
      Polyline()
        .points([
          [0, 220],
          [50, 190],
          [100, 150],
          [150, 160],
          [200, 80],
          [250, 60],
          [300, 40]
        ])
        .stroke('#007DFF')
        .strokeWidth(3)
    }
    .width('100%')
    .height(200)
    .backgroundColor('#F7F7F7')
    .borderRadius(8)
  }

  /** ğŸ¨ å›¾è¡¨å›¾ä¾‹ */
  @Builder
  private chartLegend(color: string, text: string) {
    Row({ space: 8 }) {
      Rect({ width: 14, height: 14 }).fill(color).radius(2)
      Text(text).fontSize(12).fontColor('#333')
    }
    .alignItems(VerticalAlign.Center)
  }

  /** ğŸ“‹ å¾…åŠäº‹é¡¹å¡ç‰‡ */
  @Builder
  private todoItem(task: string, time: string, level: string, color: string) {
    Row({ space: 12 }) {
      Column() {
        Text(task).fontSize(16).fontWeight(FontWeight.Medium)
        Text(time).fontSize(12).fontColor('#999')
      }.alignItems(HorizontalAlign.Start)
      .layoutWeight(1)

      Text(level)
        .fontSize(12)
        .padding({ left: 8, right: 8, top: 3, bottom: 3 })
        .backgroundColor(color)
        .fontColor(Color.White)
        .borderRadius(4)
    }
    .width('100%')
    .margin({ bottom: 12 })
    .padding({ bottom: 12 })
    .border({ width: { bottom: 1 }, color: '#F0F0F0' })
  }
}

