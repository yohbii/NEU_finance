# 智能投顾系统数据库脚本说明

## 文件说明

### 1. init.sql - 数据库初始化脚本
- **用途**: 创建数据库和所有表结构
- **内容**: 
  - 创建 `intelligent_advisor` 数据库
  - 创建13个核心数据表及其索引和外键约束
- **执行顺序**: 第一个执行

### 2. data.sql - 测试数据脚本
- **用途**: 插入完整的测试数据
- **内容**:
  - 10个基金信息记录
  - 60条基金净值历史数据（最近12个月）
  - 10条基金业绩数据
  - 8个因子信息和对应的因子值数据
  - 5个投资策略及其持仓配置
  - 3个策略回测结果
  - 3个组合产品
  - 10条交易记录
  - 6个调仓计划及明细
  - 4个测试用户
- **执行顺序**: 在init.sql之后执行

### 3. factor_analysis.sql - 因子分析结果表
- **用途**: 创建因子分析结果存储表
- **内容**: factor_analysis_result表结构
- **执行顺序**: 在init.sql之后执行（可选）

## 使用方法

### 方法一：完整初始化（推荐）
```bash
# 1. 执行数据库和表结构初始化
mysql -u root -p < init.sql

# 2. 插入测试数据
mysql -u root -p < data.sql

# 3. （可选）创建因子分析结果表
mysql -u root -p < factor_analysis.sql
```

### 方法二：MySQL客户端执行
```sql
-- 连接MySQL
mysql -u root -p

-- 执行初始化脚本
source /path/to/init.sql;

-- 执行测试数据脚本
source /path/to/data.sql;

-- （可选）执行因子分析表脚本
source /path/to/factor_analysis.sql;
```

## 数据特点

### 基金数据
- 包含不同类型基金：混合型、股票型、债券型、货币基金、指数型
- 涵盖主流基金公司产品
- 提供12个月完整净值走势数据
- 包含完整的业绩指标（收益率、夏普比率、最大回撤等）

### 策略数据
- 5种不同风格的投资策略
- 包含策略持仓配置和回测结果
- 提供完整的风险收益指标

### 交易数据
- 包含买入、卖出交易记录
- 提供调仓计划和执行明细
- 支持交易状态跟踪

### 因子数据
- 8个核心投资因子
- 包含估值、成长、质量、风险等维度
- 提供因子值和百分位排名

## 图表支持

这些测试数据专门设计用于支持前端图表显示：

1. **净值走势图**: 基于fund_net_value表的历史数据
2. **业绩对比图**: 基于fund_performance表的指标数据
3. **策略回测图**: 基于strategy_backtest表的回测结果
4. **因子分析图**: 基于fund_factor_value表的因子数据
5. **交易统计图**: 基于trade_record表的交易数据
6. **调仓分析图**: 基于rebalance_plan和rebalance_detail表的调仓数据

## 注意事项

1. **数据库字符集**: 使用utf8mb4字符集，支持中文和特殊字符
2. **外键约束**: 所有表都设置了适当的外键约束，确保数据一致性
3. **索引优化**: 为常用查询字段创建了索引，提高查询性能
4. **测试账户**: 
   - 用户名: admin, test, investor1, analyst1
   - 密码: 统一为 admin123（已加密存储）

## 扩展说明

如需添加更多测试数据，可以参考data.sql中的数据格式，注意保持：
- 数据的一致性和完整性
- 合理的时间序列关系
- 符合业务逻辑的数值范围 