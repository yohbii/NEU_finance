-- 智能投顾系统测试数据
USE intelligent_advisor;

-- 清空现有数据
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE rebalance_detail;
TRUNCATE TABLE rebalance_plan;
TRUNCATE TABLE trade_record;
TRUNCATE TABLE portfolio_product;
TRUNCATE TABLE strategy_backtest;
TRUNCATE TABLE strategy_holding;
TRUNCATE TABLE strategy_info;
TRUNCATE TABLE fund_factor_value;
TRUNCATE TABLE factor_info;
TRUNCATE TABLE fund_performance;
TRUNCATE TABLE fund_net_value;
TRUNCATE TABLE fund_info;
TRUNCATE TABLE users;
SET FOREIGN_KEY_CHECKS = 1;

-- 插入用户数据
INSERT INTO users (username, password, email, real_name) VALUES
('admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDi', 'admin@example.com', '系统管理员'),
('test', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDi', 'test@example.com', '测试用户'),
('investor1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDi', 'investor1@example.com', '投资者一号'),
('analyst1', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iKTVEFDi', 'analyst1@example.com', '分析师一号');

-- 插入基金信息数据
INSERT INTO fund_info (fund_code, fund_name, fund_type, fund_company, fund_manager, establish_date, unit_net_value, accumulated_net_value, risk_level, min_investment, management_fee, description) VALUES
('000001', '华夏成长混合', '混合型基金', '华夏基金管理有限公司', '张明', '2020-01-15', 1.2580, 1.2580, 3, 100.00, 0.0150, '专注于成长性企业投资的混合型基金'),
('000002', '易方达价值精选', '股票型基金', '易方达基金管理有限公司', '李华', '2019-06-20', 2.1450, 2.3450, 4, 1000.00, 0.0150, '价值投资理念，精选优质股票'),
('000003', '南方稳健债券', '债券型基金', '南方基金管理股份有限公司', '王强', '2018-03-10', 1.0850, 1.2350, 2, 100.00, 0.0080, '稳健的债券投资策略'),
('000004', '博时货币市场', '货币基金', '博时基金管理有限公司', '赵敏', '2017-12-01', 1.0000, 1.0000, 1, 1.00, 0.0030, '流动性强的货币市场基金'),
('000005', '广发小盘成长', '股票型基金', '广发基金管理有限公司', '陈刚', '2020-09-15', 1.8920, 1.8920, 4, 100.00, 0.0150, '专注小盘成长股投资'),
('000006', '招商中证500', '指数型基金', '招商基金管理有限公司', '刘洋', '2019-02-28', 1.4560, 1.4560, 3, 100.00, 0.0120, '跟踪中证500指数'),
('000007', '工银瑞信红利', '股票型基金', '工银瑞信基金管理有限公司', '孙丽', '2018-11-20', 1.6780, 1.9780, 3, 1000.00, 0.0150, '专注高股息率股票投资'),
('000008', '建信优选成长', '混合型基金', '建信基金管理有限责任公司', '马超', '2020-05-12', 1.3450, 1.3450, 3, 100.00, 0.0150, '优选成长性企业投资'),
('000009', '嘉实沪深300', '指数型基金', '嘉实基金管理有限公司', '周杰', '2019-08-15', 1.5680, 1.5680, 3, 100.00, 0.0120, '跟踪沪深300指数'),
('000010', '富国创新科技', '股票型基金', '富国基金管理有限公司', '吴磊', '2021-03-20', 0.9850, 0.9850, 4, 1000.00, 0.0150, '专注科技创新企业投资');

-- 插入基金净值数据（最近12个月）
INSERT INTO fund_net_value (fund_id, trade_date, unit_net_value, accumulated_net_value, daily_return) VALUES
-- 基金1的净值数据
(1, '2024-01-31', 1.1800, 1.1800, 0.0120),
(1, '2024-02-29', 1.2100, 1.2100, 0.0254),
(1, '2024-03-31', 1.1950, 1.1950, -0.0124),
(1, '2024-04-30', 1.2200, 1.2200, 0.0209),
(1, '2024-05-31', 1.2450, 1.2450, 0.0205),
(1, '2024-06-30', 1.2300, 1.2300, -0.0121),
(1, '2024-07-31', 1.2580, 1.2580, 0.0228),
(1, '2024-08-31', 1.2420, 1.2420, -0.0127),
(1, '2024-09-30', 1.2650, 1.2650, 0.0185),
(1, '2024-10-31', 1.2480, 1.2480, -0.0134),
(1, '2024-11-30', 1.2720, 1.2720, 0.0192),
(1, '2024-12-31', 1.2580, 1.2580, -0.0110),
-- 基金2的净值数据
(2, '2024-01-31', 2.0500, 2.2500, 0.0180),
(2, '2024-02-29', 2.0850, 2.2850, 0.0171),
(2, '2024-03-31', 2.0650, 2.2650, -0.0096),
(2, '2024-04-30', 2.0980, 2.2980, 0.0160),
(2, '2024-05-31', 2.1250, 2.3250, 0.0129),
(2, '2024-06-30', 2.1100, 2.3100, -0.0071),
(2, '2024-07-31', 2.1380, 2.3380, 0.0133),
(2, '2024-08-31', 2.1200, 2.3200, -0.0084),
(2, '2024-09-30', 2.1450, 2.3450, 0.0118),
(2, '2024-10-31', 2.1300, 2.3300, -0.0070),
(2, '2024-11-30', 2.1520, 2.3520, 0.0103),
(2, '2024-12-31', 2.1450, 2.3450, -0.0033),
-- 基金3的净值数据
(3, '2024-01-31', 1.0650, 1.2150, 0.0080),
(3, '2024-02-29', 1.0720, 1.2220, 0.0066),
(3, '2024-03-31', 1.0680, 1.2180, -0.0037),
(3, '2024-04-30', 1.0750, 1.2250, 0.0066),
(3, '2024-05-31', 1.0780, 1.2280, 0.0028),
(3, '2024-06-30', 1.0760, 1.2260, -0.0019),
(3, '2024-07-31', 1.0820, 1.2320, 0.0056),
(3, '2024-08-31', 1.0800, 1.2300, -0.0018),
(3, '2024-09-30', 1.0840, 1.2340, 0.0037),
(3, '2024-10-31', 1.0820, 1.2320, -0.0018),
(3, '2024-11-30', 1.0860, 1.2360, 0.0037),
(3, '2024-12-31', 1.0850, 1.2350, -0.0009),
-- 基金4的净值数据
(4, '2024-01-31', 1.0000, 1.0000, 0.0015),
(4, '2024-02-29', 1.0000, 1.0000, 0.0012),
(4, '2024-03-31', 1.0000, 1.0000, 0.0018),
(4, '2024-04-30', 1.0000, 1.0000, 0.0020),
(4, '2024-05-31', 1.0000, 1.0000, 0.0015),
(4, '2024-06-30', 1.0000, 1.0000, 0.0012),
(4, '2024-07-31', 1.0000, 1.0000, 0.0018),
(4, '2024-08-31', 1.0000, 1.0000, 0.0015),
(4, '2024-09-30', 1.0000, 1.0000, 0.0012),
(4, '2024-10-31', 1.0000, 1.0000, 0.0015),
(4, '2024-11-30', 1.0000, 1.0000, 0.0018),
(4, '2024-12-31', 1.0000, 1.0000, 0.0015),
-- 基金5的净值数据
(5, '2024-01-31', 1.7200, 1.7200, 0.0250),
(5, '2024-02-29', 1.7650, 1.7650, 0.0262),
(5, '2024-03-31', 1.7420, 1.7420, -0.0130),
(5, '2024-04-30', 1.7850, 1.7850, 0.0247),
(5, '2024-05-31', 1.8120, 1.8120, 0.0151),
(5, '2024-06-30', 1.7980, 1.7980, -0.0077),
(5, '2024-07-31', 1.8350, 1.8350, 0.0206),
(5, '2024-08-31', 1.8180, 1.8180, -0.0093),
(5, '2024-09-30', 1.8520, 1.8520, 0.0187),
(5, '2024-10-31', 1.8320, 1.8320, -0.0108),
(5, '2024-11-30', 1.8680, 1.8680, 0.0196),
(5, '2024-12-31', 1.8920, 1.8920, 0.0128);

-- 插入基金业绩数据
INSERT INTO fund_performance (fund_id, performance_date, ytd_return, one_month_return, three_month_return, six_month_return, one_year_return, three_year_return, max_drawdown, sharpe_ratio, volatility) VALUES
(1, '2024-12-31', 0.0650, 0.0120, 0.0380, 0.0580, 0.0650, 0.1850, -0.0520, 1.25, 0.1580),
(2, '2024-12-31', 0.0820, 0.0180, 0.0450, 0.0720, 0.0820, 0.2150, -0.0480, 1.42, 0.1720),
(3, '2024-12-31', 0.0350, 0.0080, 0.0220, 0.0310, 0.0350, 0.1120, -0.0280, 0.95, 0.0850),
(4, '2024-12-31', 0.0180, 0.0030, 0.0120, 0.0160, 0.0180, 0.0520, -0.0050, 0.65, 0.0320),
(5, '2024-12-31', 0.0920, 0.0220, 0.0520, 0.0780, 0.0920, 0.2480, -0.0680, 1.58, 0.1950),
(6, '2024-12-31', 0.0560, 0.0150, 0.0320, 0.0480, 0.0560, 0.1680, -0.0420, 1.18, 0.1420),
(7, '2024-12-31', 0.0680, 0.0180, 0.0380, 0.0580, 0.0680, 0.1920, -0.0450, 1.32, 0.1650),
(8, '2024-12-31', 0.0720, 0.0160, 0.0420, 0.0620, 0.0720, 0.2080, -0.0520, 1.38, 0.1680),
(9, '2024-12-31', 0.0580, 0.0140, 0.0350, 0.0520, 0.0580, 0.1720, -0.0380, 1.28, 0.1520),
(10, '2024-12-31', -0.0150, -0.0050, -0.0080, -0.0120, -0.0150, 0.0850, -0.0850, 0.82, 0.2150);

-- 插入因子信息数据
INSERT INTO factor_info (factor_code, factor_name, factor_type, factor_category, description, calculation_formula) VALUES
('PE', '市盈率', '估值因子', '价值', '股价与每股收益的比率', 'PE = 股价 / 每股收益'),
('PB', '市净率', '估值因子', '价值', '股价与每股净资产的比率', 'PB = 股价 / 每股净资产'),
('ROE', '净资产收益率', '盈利因子', '质量', '净利润与股东权益的比率', 'ROE = 净利润 / 股东权益'),
('MOMENTUM', '动量因子', '技术因子', '动量', '过去一段时间的收益率', '过去12个月收益率'),
('VOLATILITY', '波动率因子', '风险因子', '风险', '收益率的标准差', '收益率标准差'),
('SIZE', '规模因子', '风格因子', '规模', '市值规模', '总市值'),
('GROWTH', '成长因子', '成长因子', '成长', '盈利增长率', '净利润增长率'),
('QUALITY', '质量因子', '质量因子', '质量', '财务质量综合评分', '多维度财务指标加权');

-- 插入基金因子值数据
INSERT INTO fund_factor_value (fund_id, factor_id, factor_date, factor_value, percentile_rank) VALUES
-- 基金1的因子值
(1, 1, '2024-12-31', 15.50, 0.6500),
(1, 2, '2024-12-31', 1.80, 0.5500),
(1, 3, '2024-12-31', 0.1250, 0.7200),
(1, 4, '2024-12-31', 0.0650, 0.6800),
(1, 5, '2024-12-31', 0.1580, 0.4500),
(1, 6, '2024-12-31', 850000000.00, 0.3500),
(1, 7, '2024-12-31', 0.1850, 0.7500),
(1, 8, '2024-12-31', 0.7800, 0.8200),
-- 基金2的因子值
(2, 1, '2024-12-31', 22.30, 0.4200),
(2, 2, '2024-12-31', 2.50, 0.3800),
(2, 3, '2024-12-31', 0.1580, 0.8500),
(2, 4, '2024-12-31', 0.0820, 0.7800),
(2, 5, '2024-12-31', 0.1720, 0.3200),
(2, 6, '2024-12-31', 1200000000.00, 0.5500),
(2, 7, '2024-12-31', 0.2150, 0.8800),
(2, 8, '2024-12-31', 0.8500, 0.9200);

-- 插入策略信息数据
INSERT INTO strategy_info (strategy_code, strategy_name, strategy_type, risk_level, target_return, max_drawdown, rebalance_frequency, description) VALUES
('ST001', '价值投资策略', '价值型', 3, 0.1200, 0.0800, '季度', '专注于低估值、高股息的价值股投资'),
('ST002', '成长投资策略', '成长型', 4, 0.1800, 0.1200, '月度', '专注于高成长性企业的投资策略'),
('ST003', '稳健配置策略', '平衡型', 2, 0.0800, 0.0500, '半年', '股债平衡配置，追求稳健收益'),
('ST004', '量化选股策略', '量化型', 3, 0.1500, 0.1000, '月度', '基于量化模型的股票选择策略'),
('ST005', '行业轮动策略', '主题型', 4, 0.2000, 0.1500, '季度', '根据经济周期进行行业配置');

-- 插入策略持仓数据
INSERT INTO strategy_holding (strategy_id, fund_id, target_weight, current_weight) VALUES
-- 价值投资策略持仓
(1, 1, 0.3000, 0.2950),
(1, 3, 0.4000, 0.4100),
(1, 7, 0.3000, 0.2950),
-- 成长投资策略持仓
(2, 2, 0.4000, 0.3850),
(2, 5, 0.3500, 0.3600),
(2, 8, 0.2500, 0.2550);

-- 插入策略回测数据
INSERT INTO strategy_backtest (strategy_id, backtest_name, start_date, end_date, initial_capital, total_return, annual_return, max_drawdown, sharpe_ratio, volatility) VALUES
(1, '价值投资策略回测2024', '2024-01-01', '2024-12-31', 1000000.00, 0.1250, 0.1250, -0.0680, 1.35, 0.1420),
(2, '成长投资策略回测2024', '2024-01-01', '2024-12-31', 1000000.00, 0.1850, 0.1850, -0.1150, 1.58, 0.1850),
(3, '稳健配置策略回测2024', '2024-01-01', '2024-12-31', 1000000.00, 0.0850, 0.0850, -0.0420, 1.12, 0.0950);

-- 插入组合产品数据
INSERT INTO portfolio_product (product_code, product_name, product_type, strategy_id, risk_level, min_investment, management_fee, description) VALUES
('PD001', '稳健增长组合', '混合型', 1, 3, 10000.00, 0.0120, '适合稳健型投资者的均衡配置产品'),
('PD002', '成长先锋组合', '股票型', 2, 4, 50000.00, 0.0150, '专注成长股投资的高收益产品'),
('PD003', '固收增强组合', '债券型', 3, 2, 5000.00, 0.0080, '以债券为主的稳健收益产品');

-- 插入交易记录数据
INSERT INTO trade_record (trade_no, portfolio_id, fund_id, trade_type, trade_amount, trade_shares, trade_price, trade_fee, trade_date, remark) VALUES
('T202412010001', 1, 1, 1, 50000.00, 39682.54, 1.2600, 50.00, '2024-12-01', '定期投资'),
('T202412010002', 1, 2, 1, 30000.00, 13986.01, 2.1450, 30.00, '2024-12-01', '增持优质基金'),
('T202412020001', 2, 5, 1, 80000.00, 42283.30, 1.8920, 80.00, '2024-12-02', '新建仓位'),
('T202412030001', 3, 3, 1, 25000.00, 23041.47, 1.0850, 20.00, '2024-12-03', '债券配置'),
('T202412040001', 1, 1, 2, 20000.00, 15873.02, 1.2600, 20.00, '2024-12-04', '部分赎回');

-- 插入调仓计划数据
INSERT INTO rebalance_plan (plan_name, portfolio_id, plan_date, execution_date, total_amount, plan_status, description) VALUES
('稳健增长组合Q4调仓', 1, '2024-10-01', '2024-10-02', 500000.00, 2, '第四季度定期调仓'),
('成长先锋组合月度调仓', 2, '2024-12-01', '2024-12-02', 800000.00, 2, '12月份月度调仓'),
('稳健增长组合Q1调仓', 1, '2025-01-01', NULL, 520000.00, 0, '2025年第一季度调仓计划');

-- 插入调仓明细数据
INSERT INTO rebalance_detail (plan_id, fund_id, current_weight, target_weight, weight_diff, trade_type, trade_amount, trade_shares, execution_status) VALUES
-- 稳健增长组合Q4调仓明细
(1, 1, 0.3200, 0.3000, -0.0200, 2, 10000.00, 7936.51, 1),
(1, 2, 0.2800, 0.3000, 0.0200, 1, 10000.00, 4662.00, 1),
(1, 3, 0.4000, 0.4000, 0.0000, 0, 0.00, 0.00, 1),
-- 待执行的调仓明细
(3, 1, 0.2950, 0.3000, 0.0050, 1, 2600.00, 2063.49, 0),
(3, 2, 0.3100, 0.3000, -0.0100, 2, 5200.00, 2424.48, 0),
(3, 3, 0.3950, 0.4000, 0.0050, 1, 2600.00, 2396.31, 0); 